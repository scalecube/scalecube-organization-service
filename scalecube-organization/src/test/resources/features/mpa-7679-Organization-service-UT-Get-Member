Feature: Organization service members management - Get member

  I'm as the organization Owner or Admin want to get the list of existing members who steep into my organization.


  #MPA-7229 (#1)
  Scenario: Successful get the list of all the members from the relevant Organization by the owner
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And each of the users "B" and "C" who have got the "userId" issued by relevant authority were invited to user's "A" organization as the "member" role
    When the user "A" requested to get all members from own organization
    Then user "A" should receive successful response with list of members: "A", "B" and "C"


  #MPA-7229 (#2)
  Scenario: Successful get the list of all the members from the relevant Organization by the admin
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And the user "B" who have got the "userId" issued by relevant authority was invited to user's "A" organization and promoted to "admin" role
    When the user "B" requested to get all members from own organization
    Then user "B" should receive successful response with list of members: "A" and "B"


  #MPA-7229 (#3)
  Scenario: Fail to get the list of all the members from the relevant Organization by the existing member from the relevant Organization
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And the user "B" who have got the "userId" issued by relevant authority was invited to user's "A" organization with "member" role
    When the user "B" requested to get all members from user's "A" organization
    Then user "B" should get an error message: "user: 'userId "B"', name: 'null', not in role Owner or Admin of organization: 'org "B" name'"


  #MPA-7229 (#4)
  Scenario: Fail to get members from non-existent Organization
    Given the user "A" have got a valid "token" issued by relevant authority
    And no organization "organizationId" were created yet
    When the user "A" requested to get all the members from non-existent organization "organizationId"
    Then user "A" should receive the error message with non-existent: "organizationId"


  #MPA-7229 (#5)
  Scenario: Fail to get the list of all the members from the relevant Organization upon the existing owner (requester) was removed from own Organization
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And the user "B" who have got the "userId" issued by relevant authority was invited to user's "A" organization and promoted to "owner" role
    And the user "A" was removed from user's "A" organization
    When the user "A" requested to get the list of all the members from the own former organization
    Then user "A" should get an error message: "user: 'null', name: 'user-A-Id@clients', is not a member of organization: 'ORG-ID'"


  #MPA-7229 (#6)
  Scenario: Fail to get the user from specific Organization if the token is invalid (expired)
    Given a user "D" have got the invalid either expired "token"
    When user "D" requested to get the list of all the members from some organization "organizationId"
    Then user "D" should receive the error message: "Token verification failed"