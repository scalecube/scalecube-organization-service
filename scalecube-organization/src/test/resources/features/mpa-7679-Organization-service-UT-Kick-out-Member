Feature: Organization service members management - Kick-out member

  I'm as the organization Owner or Admin want to kick-out (remove) existing members from my organization.

  #MPA-7229 (#1)
  Scenario: Successful remove (kick-out) of specific "member" from a relevant Organization
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And the user "B" who have got the "userId" issued by relevant authority was invited to user's "A" organization as a "member" role
    When the user "A" requested to remove the user "B" from user's "A" organization
    Then user "B" should abandon user's "A" organization
    And user "A" should get successful response with the empty object


  #MPA-7229 (#2)
  Scenario: Successful remove (kick-out) the "owner" and "member" from relevant Organization by another owner
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And the user "B" who have got the "userId" issued by relevant authority was invited to user's "A" organization and promoted to "owner" role
    And the user "C" who have got the "userId" issued by relevant authority was invited to user's "A" organization as a "member" role
    When the user "B" requested to remove the users "A" and "C" from user's "A" organization
    Then users "A" and "C" should abandon user's "A" organization
    And user "B" should get successful responses with the empty object


  #MPA-7229 (#3)
  Scenario: Successful remove (kick-out) of the "admin" and "member" from relevant Organization by another "admin"
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And each of the users "B" and "C" who have got the "userId" issued by relevant authority were invited to user's "A" organization and both promoted to "admin" role
    And the user "D" who have got the "userId" issued by relevant authority was invited to user's "A" organization as a "member" role
    When the user "B" requested to remove the users "C" and "D" from user's "A" organization
    Then users "C" and "D" should abandon user's "A" organization
    And user "B" should get successful responses with the empty object


  #MPA-7229 (#4)
  Scenario: Fail to remove (kick-out) the single owner from relevant Organization upon own decision
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    When the user "A" requested to remove himself from own organization "organizationId"
    Then user "A" should get an error message: "At least one Owner should be persisted in the organization: 'organizationId'"


  #MPA-7229 (#4.1)
  Scenario: Fail to remove (kick-out) the single owner from relevant Organization by another "admin"
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And the user "B" who have got the "userId" issued by relevant authority was invited to user's "A" organization and promoted to "admin" role
    When the user "B" requested to remove the user "A" from user's "A" organization
    Then user "B" should get an error message: "At least one Owner should be persisted in the organization: 'organizationId'"


  #MPA-7229 (#5)
  Scenario: Fail to remove (kick-out) specific member from relevant Organization upon the existing member (requester) got "member" role permission level
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And each of the users "B" and "C" who have got the "userId" issued by relevant authority were invited as the "member" to user's "A" organization
    When the user "B" requested to remove the user "C" from user's "A" organization
    Then user "B" should get an error message: "user: 'userId "B"', name: 'null', not in role Owner or Admin of organization: 'org "B" name'"


  #MPA-7229 (#6)
  Scenario: Fail to remove a specific "member" from from relevant Organization upon the existing (requester) admin either owner was removed from the relevant organization
    Given the user "A" have got a valid "token" issued by relevant authority
    And only single organization "organizationId" with specified "name" and "email" already created and owned by user "A"
    And the user "B" who have got the "userId" issued by relevant authority was invited to user's "A" organization and promoted to "owner" role
    And the user "B" requested to remove the user "A" from user's "A" organization
    When the user "A" and requested to remove the user "B" from user's "A" organization
    Then user "A" should get an error message: "user: 'userId "A"', name: 'null', not in role Owner or Admin of organization: 'org "A" name'"


  #MPA-7229 (#7)
  Scenario: Fail to remove the user from specific Organization if the token is invalid (expired)
    Given a user "D" have got the invalid either expired "token"
    When user "D" requested to remove some user "userId" from some organization "organizationId"
    Then user "D" should receive the error message: "Token verification failed"